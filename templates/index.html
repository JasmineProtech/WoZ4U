<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../static/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type=text/javascript>

  //function connect_robot(robot_ip){
  function connect_robot(){
    robot_ip = document.getElementById("pepper_select_ips").value; // get ip from select option
    $("#connect_btn").html("..."); // set btn text to ...
    $("#connect_btn").addClass("example_c_ongoing"); // give it the css class for "processing"
    $.getJSON( // async call flask function with arguments
      "/connect_robot?ip=" + robot_ip,
      function(data) {
        console.log(data);
      }
    ).done(function() {
      $("#connect_btn").html("Connected"); // set btn text to ...
      $("#connect_btn").removeClass("example_c_ongoing"); // remove class for ongoing
      $("#connect_btn").addClass("example_c_green"); // give class for succes

      // TODO: SET ALL STATE BUTTON ACCORINDGLY, NOT SIMPLE GREEN
      $("#toggle_btn_collision_avoidance").addClass("example_c_green"); // give class for succes
      $("#toggle_btn_breathing").addClass("example_c_green"); // give class for succes
      $("#toggle_btn_blinking").addClass("example_c_green"); // give class for succes
      $("#toggle_btn_basic_awareness").addClass("example_c_green"); // give class for succes
    }).fail(function() {
      $("#connect_btn").css("background-color", "#E76F51"); // set color of button to red on fail  });
    })
  };

  function set_autonomous_state(){
    state = document.getElementById("autonomous_states").value;
    $("#auto_state_set").html("...")
    $("#auto_state_set").addClass("example_c_ongoing"); // give it the css class for "processing"
    $.getJSON( // async call flask function with arguments
      "/set_autonomous_state?state=" + state,
      function(data) {
        console.log(data);
      }
    ).done(function() {
      $("#auto_state_set").html("Set")
      $("#auto_state_set").removeClass("example_c_ongoing"); // remove class for ongoing
      $("#auto_state_set").addClass("example_c_green"); // give class for succes
    }).fail(function() {
      $("#auto_state_set").removeClass("example_c_ongoing"); // remove class for ongoing
      $("#auto_state_set").addClass("example_c_red"); // give class for succes
      $("#auto_state_set").html("FAIL")

    })
  }

  function toggle_setting(setting){
    $("#toggle_btn_" + setting).addClass("example_c_ongoing"); // give it the css class for "processing"
    $("#toggle_btn_" + setting).removeClass("example_c_green"); // remove class for ongoing
    $("#toggle_btn_" + setting).removeClass("example_c_red"); // remove class for ongoing

    let curr_state =  $("#toggle_btn_" + setting).html()
    $("#toggle_btn_" + setting).html("...")
    $.getJSON( // async call flask function with arguments
      "/toggle_setting?setting=" + setting,
      function(data) {
        console.log(data);
        if (curr_state == "On") {
          $("#toggle_btn_" + setting).html("Off")
          $("#toggle_btn_" + setting).removeClass("example_c_ongoing"); // remove class for ongoing
          $("#toggle_btn_" + setting).addClass("example_c_red"); // give class for succes
        } else {
          $("#toggle_btn_" + setting).html("On")
          $("#toggle_btn_" + setting).css("background-color", "#2A9D8F"); // set color of button to green
          $("#toggle_btn_" + setting).removeClass("example_c_ongoing"); // remove class for ongoing
          $("#toggle_btn_" + setting).addClass("example_c_green"); // give class for succes
        }
      }
    )
  }

  function say_custom_text() {
    let text = $("#custom_text_msg").val();

    $("#custom_text_btn").html("..."); // set btn text to ...
    $("#custom_text_btn").addClass("example_c_ongoing"); // give it the css class for "processing"
    
    $.getJSON(
      "/say_text?msg=" + text,
      function(data) {
        console.log(data);
      }
    ).done(function() {
      $("#custom_text_btn").html("Say it")
      $("#custom_text_btn").removeClass("example_c_ongoing")
    })
  }

  function say_predefined_text(index) {

    $("#voice_cmd_"+index).html("..."); // set btn text to ...
    $("#voice_cmd_"+index).addClass("example_c_ongoing"); // give it the css class for "processing"
    
    $.getJSON(
      "/say_predefined_text?index=" + index,
      function(data) {
        console.log(data);
      }
    ).done(function() {
      $("#voice_cmd_"+index).html("Say it")
      $("#voice_cmd_"+index).removeClass("example_c_ongoing")
    })
  }

</script>
</head>
<body>

<div class="grid-container">
  <!-- Pepper  select -->
  <div class="pepper_select">
    <h2>Select robot</h2>
    <div class="row">
      <select name="pepper_ips" id="pepper_select_ips">
        <option value="192.168.10.1">192.168.10.1</option>
        <option value="192.168.10.2">192.168.10.2</option>
        <option value="192.168.10.3">192.168.10.3</option>
      </select>
      <br>
      <br>
    </div>


      <div class="row">
        <a href="#" onclick="connect_robot()">
          <button class="example_c" id="connect_btn">Connect</button>
        </a>
      </div>
      <br>
  </div>

  <!-- Pepper  settings -->
  <div class="autonomous_life_settings">
    <h2>Autonomous life settings</h2>

    <!-- COLUM 1-->
    <!-- <div style="width: 50%; float: left;"> -->
    <div style="width: 100%; float: left;">
      <div class="row">
        <div class="btn_label_wrapper">
          <span>
            Autonomous state: 
          </span> 
        </div>
        
        <div class="btn_wrapper">
          <select name="pepper_ips" id="autonomous_states">
            <option value="Interactive">Interactive</option>
            <option value="Solitary">Solitary</option>
            <option value="Safeguard">Safeguard</option>
            <option value="Disabled">Disabled</option>
          </select>
          <a href="#" onclick="set_autonomous_state()">
            <button class="example_c" id="auto_state_set">Set</button>
          </a>
        </div>

      </div>
      <br>

      <div class="row">
        <div class="btn_label_wrapper">
          <span>Toggle collision avoidance:</span>
        </div>
        <div class="btn_wrapper">
          <button id="toggle_btn_collision_avoidance" onclick="toggle_setting('collision_avoidance')" class="example_c">On</button>
        </div>
      </div>
      <br>

      <div class="row">
        <div class="btn_label_wrapper">
          <span>Toggle breathing: </span>
        </div>
        <div class="btn_wrapper">
          <button id="toggle_btn_breathing" onclick="toggle_setting('breathing')" class="example_c">On</button>
        </div>
      </div>
      <br>

      <div class="row">
        <div class="btn_label_wrapper">
          <span>Toggle blinking: </span>
        </div>
        <div class="btn_wrapper">
          <button id="toggle_btn_blinking" onclick="toggle_setting('blinking')" class="example_c">On</button>
        </div>
      </div>
      <br>

      <div class="row">
        <div class="btn_label_wrapper">
          <span>Toggle basic awareness: </span>
        </div>
        <div class="btn_wrapper">
          <button id="toggle_btn_basic_awareness" onclick="toggle_setting('basic_awareness')" class="example_c">On</button>
        </div>
      </div>
      <br>

    </div>

  </div>

  <!-- Pepper  speech commands -->
  <div class="pepper_speech">
    <h2>Pepper speech</h2>

    <div class="row">
      <span>Adjust volume</span>
      <input type="range" min="1" max="100" value="50">
    </div>
    <br>

    <div class="row">
      <span>Set speed</span>
      <input type="number" value="1">
    </div>
    <br>

    <div class="row">
      <span>Set pitch</span>
      <input type="number" value="1">
  </div>
  <br>
    
    <div class="row">
      <input type="text" placeholder="custom msg" id="custom_text_msg">
      <button class="example_c" onclick="say_custom_text()" id="custom_text_btn">Say it!</button>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 0</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_0" onclick="say_predefined_text(0)">Say it!</button>
      </div>
    </div>
    <br>
        
    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 1</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_1" onclick="say_predefined_text(1)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 2</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_2" onclick="say_predefined_text(2)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 3</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_3" onclick="say_predefined_text(3)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 4</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_4" onclick="say_predefined_text(4)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 5</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_5" onclick="say_predefined_text(5)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 6</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_6" onclick="say_predefined_text(6)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 7</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_7" onclick="say_predefined_text(7)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 8</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_8" onclick="say_predefined_text(8)">Say it!</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Voice cmd 9</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="example_c" id="voice_cmd_9" onclick="say_predefined_text(9)">Say it!</button>
      </div>
    </div>
    <br>

  </div>

  <!-- Camera stream  -->
  <div class="camera">
    <h2>Camera</h2>
    <img src="../static/imgs/umea_logo.png" style="max-width: 400px">
  </div>  

  <!-- Pepper  motion comands -->
  <div class="pepper_motion">
    <h2>Pepper motion</h2>

    <div class="row">
      <img src="../static/imgs/arrow_keys.png" style="max-height:150px;">
      <br>
      <br>
      <table style="width:100%">
        <tr>
          <td style="text-align: right;">Move head</td>
          <td style="text-align: left;">: Arrow keys</td>
        </tr>
        <tr>
          <td style="text-align: right;">Rotate base</td>
          <td style="text-align: left;">: ALT + Arrow keys</td>
        </tr>
        <tr>
          <td style="text-align: right;">Drive</td>
          <td style="text-align: left;">: FN + Arrow keys</td>
        </tr>
      </table>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 1</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 2</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 3</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 4</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 5</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 6</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 7</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 8</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 9</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="speech_lbl_wrapper">
        <span>Motion 10</span>
      </div>
      <div class="speech_btn_wrapper">
        <button class="speech_btn">Execute</button>
      </div>
    </div>
    <br>

  </div>

  <!-- Footer -->
  <div class="footer">
    <h2>Other</h2>

    <div class="col_one_of_three">

      <div class="row">
        <div class="btn_label_wrapper">
          <span>Toggle eye light</span>
        </div>
        <div class="btn_wrapper">
          <button onclick="myFunction()" class="toggle_btw">On</button>
        </div>
      </div>
      <br>

      <div class="row">
        <div class="btn_label_wrapper">
          <span>Toggle ear light</span>
        </div>
        <div class="btn_wrapper">
          <button onclick="myFunction()" class="toggle_btw">On</button>
        </div>
      </div>
      <br>

    </div>

    <div class="col_one_of_three">
      <div class="row">
        <button>Arbitrary action 1</button>
      </div>
      <br>

      <div class="row">
        <button>Arbitrary action 2</button>
      </div>
      <br>

    </div>

    <div class="col_one_of_three">
      <div class="row">
        <button>Arbitrary action 3</button>
      </div>
      <br>

      <div class="row">
        <button>Arbitrary action 4</button>
      </div>
      <br>

    </div>
  </div>
</div>

</body>
</html>
